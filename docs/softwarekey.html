<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            font-size: 62.5%;
        }
    </style>
    <!-- development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

</head>

<body>
    <div id="app">
        <kai-softwarekey left-key-text="back" center-key-text="SELECT" right-key-text="options"></kai-softwarekey>
    </div>
    <script>
        const SoftwareKey = { //todo https://developer.kaiostech.com/first-app/softkeys
            template: `<div v-bind:style="softkeyStyle">
                            <div ref="softkey-left" v-bind:style="softkeyLeftStyle">{{ leftKeyText }}</div>
                            <div ref="softkey-center" v-bind:style="softkeyCenterStyle">{{ centerKeyText }}</div>
                            <div ref="softkey-right" v-bind:style="softkeyRightStyle">{{ rightKeyText }}</div>
                        </div>`,
            props:['leftKeyText','centerKeyText','rightKeyText'],
            data:function(){
                return {
                    softkeyStyle:{// doing
                        height:'3rem',
                        width:'100%',
                        backgroundColor:'#dadada',
                        borderTop:'0.1rem solid #ffffff'
                    },
                    softkeyLeftStyle:{
                        display:'inline',
                        paddingLeft:'0.5rem',
                        width:'7.2rem',
                        textAlign:'center',
                        fontFamily:'Open Sans',
                        fontSize:'1.6rem',
                        color:'#323232'
                    },
                    softkeyCenterStyle:{
                        display:'inline',
                        paddingLeft:'0.5rem',
                        paddingRight:'0.5rem',
                        width:'7.6rem',
                        textAlign:'center',
                        fontFamily:'Open Sans',
                        fontWeight:'bold',
                        fontSize:'1.6rem',
                        color:'#323232'
                    },
                    softkeyRightStyle:{
                        display:'inline',
                        paddingRight:'0.5rem',
                        width:'7.2rem',
                        textAlign:'center',
                        fontFamily:'Open Sans',
                        fontSize:'1.6rem',
                        color:'#323232'
                    }
                }
            },
            methods: {
                left: function () { console.log('You click on SoftLeft') },
                center: function () { console.log('You click on Enter') },
                right: function () { console.log('You click on SoftRight') },
                handleKeyDown(evt) {
                    switch (evt.key) {
                        case 'SoftLeft':
                            // Action case press left key
                            this.left();
                            break;

                        case 'SoftRight':
                            // Action case press right key
                            this.right();
                            break;

                        case 'Enter':
                            // Action case press center key
                            this.center();
                            break;
                    }
                },
                updateSoftKey(props) {
                    const keys = Object.keys(props);

                    keys.forEach(function (key) {
                        const button = document.getElementById('softkey-' + key);
                        button.textContent = props[key].label;
                        softkeyCallback[key] = props[key].callback;
                    });
                }
                // updateSoftKey({
                //     left: {
                //         label: 'Left text',
                //         callback: function(){ /* Code */ }
                //     },
                //     center: {
                //         label: 'Center text',
                //         callback: function(){ /* Code */ }
                //     },
                //     right: {
                //         label: 'Right text',
                //         callback: function(){ /* Code */ }
                //     }
                // });
            },
            mounted() {
                document.addEventListener('keydown', this.handleKeyDown);
            },
            beforeDestroyed() {
                document.removeEventListener('keydown', this.handleKeyDown);
            }
        } // <kai-softwarekey left-key-text="back" center-key-text="SELECT" right-key-text="options"></kai-softwarekey>
    
        Vue.component('kai-softwarekey', SoftwareKey);
        const app = new Vue({
            el: '#app'
        });
    </script>
</body>

</html>